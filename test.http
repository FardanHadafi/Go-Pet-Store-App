@baseUrl = http://localhost:3000/api
@userToken =eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjozLCJlbWFpbCI6Im93bmVyQGV4YW1wbGUuY29tIiwicm9sZSI6InVzZXIiLCJpc3MiOiJwZXRzdG9yZS1hcGkiLCJleHAiOjE3NTk0OTUwMjcsIm5iZiI6MTc1OTQwODYyNywiaWF0IjoxNzU5NDA4NjI3fQ.ISwDcscagCaOT_VHN2YYW1HzWACQkag6j0_d5QsKNqA
@adminToken =

### 0. Check API docs (Swagger)
GET http://localhost:3000/docs
Accept: text/html

### 1. Register a new user
POST {{baseUrl}}/users/register
Content-Type: application/json
Accept: application/json

{
  "username": "pet_owner",
  "password": "secure123",
  "email": "owner@example.com"
}

### 2. Login with the same user
POST {{baseUrl}}/users/login
Content-Type: application/json
Accept: application/json

{
  "username": "pet_owner",
  "password": "secure123"
}

> {% client.global.set("userToken", response.body.token); %}

### 3. Refresh token
POST {{baseUrl}}/auth/refresh
Authorization: Bearer {{userToken}}
Accept: application/json

### 4. Get all users (protected, normal user → should fail)
GET {{baseUrl}}/users
Authorization: Bearer {{userToken}}
Accept: application/json

### 5. Get my user profile (protected)
GET {{baseUrl}}/users/1
Authorization: Bearer {{userToken}}
Accept: application/json

### 6. Update my user profile (protected)
PUT {{baseUrl}}/users/1
Authorization: Bearer {{userToken}}
Content-Type: application/json
Accept: application/json

{
  "username": "updated_owner1",
  "email": "owner1_updated@example.com"
}

### 7. Change password (protected)
PATCH {{baseUrl}}/users/1/password
Authorization: Bearer {{userToken}}
Content-Type: application/json
Accept: application/json

{
  "old_password": "secure123",
  "new_password": "newpass456"
}

### 8. Create a pet (protected, owned by user)
POST {{baseUrl}}/pets
Authorization: Bearer {{userToken}}
Content-Type: application/json
Accept: application/json

{
  "name": "Max",
  "species": "dog",
  "price": 500.00
}

### 9. Get my pets (protected, with pagination & filtering)
GET {{baseUrl}}/pets?page=1&limit=5&species=dog
Authorization: Bearer {{userToken}}
Accept: application/json

### 10. Get pet by ID (protected)
GET {{baseUrl}}/pets/1
Authorization: Bearer {{userToken}}
Accept: application/json

### 11. Update pet (protected)
PUT {{baseUrl}}/pets/1
Authorization: Bearer {{userToken}}
Content-Type: application/json
Accept: application/json

{
  "name": "Buddy",
  "species": "dog",
  "price": 600.00
}

### 12. Delete pet (protected)
DELETE {{baseUrl}}/pets/1
Authorization: Bearer {{userToken}}
Accept: application/json

### 13. Delete user account (protected)
DELETE {{baseUrl}}/users/1
Authorization: Bearer {{userToken}}
Accept: application/json

### 14. Login as admin
# Make sure an admin exists in DB (role='admin')
POST {{baseUrl}}/users/login
Content-Type: application/json
Accept: application/json

{
  "username": "admin",
  "password": "adminpass"
}

> {% client.global.set("adminToken", response.body.token); %}

### 15. Admin → Get all users
GET {{baseUrl}}/admin/users
Authorization: Bearer {{adminToken}}
Accept: application/json

### 16. Admin → Get all pets
GET {{baseUrl}}/admin/pets
Authorization: Bearer {{adminToken}}
Accept: application/json

### 17. Admin → Get pets by user
GET {{baseUrl}}/pets?owner_id=1
Authorization: Bearer {{adminToken}}
Accept: application/json
